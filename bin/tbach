#!/bin/sh

sleep 10
session="bachelor_arbeit_2FA"
prjprefix="/home/batie/Projekt/cryptoOne_server_2FA"
tmux has-session -t $session

if [ $? != 0 ]; then
        # create the window for editing source code
        tmux -2 new-session -s $session -n editor -d


        tmux send-keys -t $session "cd $prjprefix" C-m
        tmux send-keys -t development 'vim' C-m
        tmux split-window -v -t $session
        tmux select-layout -t $session main-horizontal
        tmux send-keys -t development:0.2 "cd $prjprefix" C-m
        tmux new-window -n console -t $session
        tmux send-keys -t $session:2  "cd $prjprefix" C-m
        tmux select-window -t $session:1

        # A new window for git ops.
        tmux new-window -n git -t $session
        tmux split-window -h -t $session:2
        tmux split-window -v -t $session:2.0
        tmux split-window -v -t $session:2.1
        tmux send-keys -t $session:2.0 "cd $prjprefix" C-m
        tmux send-keys -t $session:2.1 "cd $prjprefix" C-m
        tmux send-keys -t $session:2.2 "cd $prjprefix" C-m
        tmux send-keys -t $session:2.3 "cd $prjprefix" C-m
        tmux send-keys -t $session:2.0 "git status" C-m
        tmux send-keys -t $session:2.1 "git log" C-m
        ## This file is opened because the README file is a repo's "front page"
        ## or "cover page".
        tmux send-keys -t $session:2.2 'vim README.md' C-m
fi

tmux attach -t $session
