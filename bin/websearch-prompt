#! /usr/bin/env python3

import sys
from PyQt4 import QtCore, QtGui, QtWebKit

class Prompt(QtGui.QDialog):
    def __init__(self, search_url):
        QtGui.QDialog.__init__(self)

        self.search_url = search_url

        font = QtGui.QFont('Helvetica', 50)

        self.input = QtGui.QLineEdit(self)
        self.input.setFont(font)
        self.input.setFixedWidth(500)
        self.input.adjustSize()

        self.input.returnPressed.connect(self.on_return_pressed)

    def on_return_pressed(self):
        self.hide()

        url     = self.search_url.format(self.input.text())
        browser = Browser(url, self)

        browser.show()

class Browser(QtGui.QMainWindow):
    def __init__(self, url, parent = None):
        QtGui.QMainWindow.__init__(self, parent)

        self.central_widget = QtGui.QWidget(self)
        self.frame          = QtGui.QFrame(self.central_widget)
        self.web_view       = QtWebKit.QWebView()
        self.main_layout    = QtGui.QHBoxLayout(self.central_widget)

        self.main_layout.setSpacing(0)
        self.main_layout.setMargin(1)
        self.main_layout.addWidget(self.web_view)

        self.setCentralWidget(self.central_widget)

        self.web_view.load(QtCore.QUrl(url))
        self.web_view.show()

if __name__ == "__main__":
    search_url = sys.argv[1]
    app        = QtGui.QApplication(sys.argv)
    prompt     = Prompt(search_url)

    prompt.show()
    sys.exit(app.exec_())
